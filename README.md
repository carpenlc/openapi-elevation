# elevation_services - OpenAPI generated server

Spring Boot Server 


## Overview  
This server was generated by the [OpenAPI Generator](https://openapi-generator.tech) project.
By using the [OpenAPI-Spec](https://openapis.org), you can easily generate a server stub.
This is an example of building a OpenAPI-enabled server in Java using the SpringBoot framework.

The underlying library integrating OpenAPI to SpringBoot is [springfox](https://github.com/springfox/springfox)

Start your server as a simple java application

You can view the api documentation in swagger-ui by pointing to  
http://localhost:8081/

Change default port value in application.properties# openapi-elevation

## Generating the Spring Boot server stubs

wget http://central.maven.org/maven2/org/openapitools/openapi-generator-cli/4.1.0/openapi-generator-cli-4.1.0.jar -O openapi-generator-cli.jar

```
# java -jar /export/home/carpenlc/openapi/openapi-generator/modules/openapi-generator-cli/target/openapi-generator-cli.jar generate \
  --generator-name spring \
  -i ./src/main/resources/elevation_services.yaml \
  --invoker-package mil.nga.elevation_services \
  --model-package mil.nga.elevation_services.model \
  --api-package  mil.nga.elevation_services.api \
  -o /export/home/carpenlc/java/openapi-generated
```
The stubs that are generated by OpenAPI are not quite correct.  The generated interfaces need to be modified in order to
allow for return types of either Error, or the appropriate return value.  The ResponseEntity return types need to be 
changed to ResponseEntity<Object>. 
  
The current production environment runs with an Oracle back-end.  Oracle does not make it easy to utilize their JDBC drivers with Maven.  As such run the following 
command to load the Oracle JDBC drivers into the local Git repository:
```
# mvn install:install-file -Dfile=./lib/ojdbc8.jar -DgroupId=com.oracle -DartifactId=ojdbc8 -Dversion=12.2.0.1 -Dpackaging=jar
```

The application utilizes OpenMap for reading/processing the DTED-formatted elevation files.  OpenMap has a broken
interpolation algorithm for determining the height at a location that does not fall directly on an elevation post.
The algorithm has been corrected and pull requests have been submitted.  However, it does not appear that the 
OpenMap project is currently maintained.  The version of OpenMap containing the corrected source is available at:
https://github.com/carpenlc/openmap

In order to build the application you will need to install the pre-built openmap library into the local Git 
repository:
```
# mvn install:install-file -Dfile=./lib/openmap-1.5.jar -DgroupId=com.bbn.openmap -DartifactId=openmap -Dversion=1.5 -Dpackaging=jar
```


